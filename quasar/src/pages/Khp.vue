<template>
    <q-page-container>
    <q-page  class="q-pa-md  " >
        <div class="	" style="max-width: 900px; margin-right: auto;; margin-left: auto;">

            <q-card>
                <q-card dark  class="my-card bg-grey-9 q-mb-lg">
                    <q-card-section class="row">
                        <div class="col-3">
                            <a href="https://www.kli.re.kr/klips/index.do" target="_blank">
                                <!--<q-icon class="text-white "  name="addchart"  :size="$q.screen.lt.sm?'sm':'xl'" ></q-icon>-->
<!--

                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                     width="101.333px" height="46.224px" viewBox="0 0 101.333 46.224" enable-background="new 0 0 101.333 46.224"
                                     xml:space="preserve">
<path fill="#FFFFFF" d="M24.567,33.016H14.73v1.557h9.099v2.545H14.73v1.558h4.608v1.032H14.73v1.558h9.099v3.101h1.695v-4.658
	h-0.793h-0.902h-2.798v-1.032h3.7h0.793v-4.701C25.524,33.434,25.106,33.016,24.567,33.016"/>
                                    <path fill="#FFFFFF" d="M28.461,33.029h-1.707v4.701c0,0.539,0.432,0.959,0.961,0.959h9.848v-1.557h-9.102V33.029z"/>
                                    <polygon fill="#FFFFFF" points="32.984,39.707 31.274,39.707 31.274,42.82 26.694,42.82 26.694,44.376 37.563,44.376 37.563,42.82
	32.984,42.82 "/>
                                    <path fill="#FFFFFF" d="M10.737,33.016v9.789H3.969v-2.244H2.26v2.842c0,0.526,0.434,0.963,0.957,0.963h9.225v-1.318v-0.242v-8.232
	h1.72v-1.557h-1.72H10.737z"/>
                                    <path fill="#FFFFFF" d="M5.36,40.516c2.021,0,3.668-1.646,3.668-3.67c0-0.853-0.313-1.644-0.809-2.275h1.635v-1.555H6.141v-1.334
	H4.583v1.334H0.87v1.555h1.635c-0.512,0.632-0.811,1.423-0.811,2.275C1.694,38.869,3.34,40.516,5.36,40.516 M5.36,34.751
	c1.152,0,2.098,0.944,2.098,2.095c0,1.17-0.945,2.098-2.098,2.098s-2.094-0.928-2.094-2.098C3.266,35.695,4.208,34.751,5.36,34.751"
                                    />
                                    <path fill="#FFFFFF" d="M38.721,33.076h-0.119v2.903v0.013c0,0.525,0.435,0.947,0.957,0.947h3.775v1.047h-4.613v1.553h2.563
	c-0.479,0.617-0.768,1.381-0.768,2.235c0,2.021,1.637,3.649,3.67,3.649c2.022,0,3.67-1.629,3.67-3.649
	c0-0.854-0.301-1.618-0.779-2.235h2.576v-1.553H45.04v-1.047h4.613v-1.424h-9.342v-1.139h9.342v-1.301h-9.342H38.721z
	 M46.286,41.774c0,1.149-0.947,2.095-2.1,2.095c-1.164,0-2.109-0.945-2.109-2.095c0-1.168,0.945-2.112,2.109-2.112
	C45.338,39.662,46.286,40.606,46.286,41.774"/>
                                    <polygon fill="#FFFFFF" points="81.509,39.104 79.97,39.104 79.97,42.521 75.026,42.521 75.026,43.927 86.454,43.927 86.454,42.521
	81.509,42.521 "/>
                                    <path fill="#FFFFFF" d="M80.713,36.9c0.467,0.686,1.215,1.215,2.242,1.596c0.838,0.297,1.81,0.477,2.917,0.539v-1.5
	c-1.359-0.107-2.337-0.314-2.931-0.619c-0.811-0.424-1.262-1.14-1.352-2.149h4.12v-1.403h-9.954v1.403h4.064
	c-0.09,1.001-0.535,1.712-1.336,2.134c-0.605,0.316-1.586,0.532-2.946,0.648v1.486c1.108-0.063,2.075-0.238,2.903-0.525
	C79.479,38.14,80.235,37.604,80.713,36.9"/>
                                    <path fill="#FFFFFF" d="M92.442,38.698c-0.505-1.181-0.758-3.04-0.758-5.579h-1.633c0,2.539-0.264,4.398-0.785,5.579
	c-0.467,1.045-1.184,1.657-2.148,1.837v1.607c0.748-0.107,1.438-0.408,2.068-0.905c0.729-0.576,1.283-1.347,1.66-2.31
	c0.369,0.992,0.887,1.761,1.553,2.31c0.613,0.506,1.334,0.808,2.162,0.905v-1.621C93.598,40.359,92.891,39.752,92.442,38.698"/>
                                    <path fill="#FFFFFF" d="M60.59,33.119h-1.244h-0.822h-0.637v7.455h-1.783v-6.066h0.676v-1.389h-5.389v1.389h0.633v6.066h-0.633
	v1.393h6.496l1.463,0.007l-0.004-3.777v-1.432v-2.248h1.244v2.248v1.393v6.39h1.5V33.119h-0.469H60.59z M54.672,40.574h-1.215V34.51
	h1.215V40.574z"/>
                                    <path fill="#FFFFFF" d="M71.131,37.686v-1.38h-6.119v-3.187h-1.581v3.525c0,0.379,0.077,0.648,0.229,0.813
	c0.145,0.15,0.378,0.229,0.703,0.229H71.131z"/>
                                    <path fill="#FFFFFF" d="M63.944,40.075h8.525v0.839h-8.525v2.551c0,0.362,0.082,0.623,0.244,0.785
	c0.154,0.153,0.387,0.23,0.703,0.23h9.156v-1.379h-8.522V42.25h8.522v-3.537H63.944V40.075z"/>
                                    <polygon fill="#FFFFFF" points="72.469,33.119 69.403,33.119 69.403,34.424 72.469,34.424 72.469,35.414 72.469,37.901
	74.047,37.901 74.047,33.119 72.856,33.119 "/>
                                    <polygon fill="#FFFFFF" points="99.583,33.119 97.993,33.119 97.059,33.119 96.411,33.119 96.411,44.547 97.993,44.547
	97.993,38.576 97.993,37.186 97.993,34.495 99.583,34.495 "/>
                                    <polygon fill="#FFFFFF" points="0.856,0.598 6.375,0.598 6.375,11.002 16.182,0.598 23.073,0.598 13.265,10.51 24.022,25.695
	17.096,25.695 9.54,14.412 6.375,17.611 6.375,25.695 0.856,25.695 "/>
                                    <polygon fill="#FFFFFF" points="26.235,0.598 31.754,0.598 31.754,21.055 43.987,21.055 43.987,25.695 26.235,25.695 "/>
                                    <rect x="47.08" y="0.598" fill="#FFFFFF" width="5.519" height="25.098"/>
                                    <path fill="#FFFFFF" d="M57.45,0.598h11.318c1.5,0,2.807,0.217,3.92,0.65c1.112,0.434,2.02,1.031,2.723,1.792
	c0.703,0.763,1.219,1.623,1.547,2.584s0.492,1.968,0.492,3.022s-0.164,2.063-0.492,3.023s-0.844,1.822-1.547,2.584
	s-1.61,1.359-2.723,1.793c-1.113,0.434-2.42,0.65-3.92,0.65h-5.8v8.998H57.45V0.598z M62.968,12.408h4.288
	c0.703,0,1.336-0.053,1.898-0.158s1.072-0.293,1.529-0.563s0.809-0.65,1.055-1.143s0.369-1.125,0.369-1.898
	s-0.123-1.406-0.369-1.898S71.141,5.87,70.684,5.59c-0.457-0.283-0.967-0.47-1.529-0.563c-0.563-0.093-1.195-0.14-1.898-0.14h-4.288
	V12.408z"/>
                                    <path fill="#FFFFFF" d="M84.657,17.364c0,1.569,0.521,2.735,1.564,3.497c1.041,0.764,2.373,1.143,3.99,1.143
	c0.537,0,1.082-0.047,1.633-0.141c0.551-0.093,1.078-0.257,1.582-0.492c0.504-0.234,0.908-0.556,1.213-0.967
	c0.305-0.409,0.457-0.919,0.457-1.527c0-0.563-0.152-1.037-0.457-1.425c-0.305-0.387-0.715-0.714-1.23-0.983
	s-1.078-0.498-1.688-0.686s-1.43-0.398-2.461-0.633c-0.68-0.188-1.218-0.328-1.617-0.422c-1.101-0.305-2.072-0.621-2.916-0.949
	s-1.611-0.756-2.303-1.283s-1.242-1.195-1.652-2.004s-0.615-1.775-0.615-2.9c0-1.242,0.264-2.342,0.791-3.304
	c0.527-0.96,1.242-1.757,2.145-2.39s1.91-1.107,3.023-1.424C87.227,0.158,88.37,0,89.542,0c1.358,0,2.642,0.152,3.849,0.457
	s2.273,0.785,3.199,1.441s1.658,1.5,2.197,2.529c0.539,1.033,0.809,2.25,0.809,3.656h-5.344c-0.07-1.406-0.545-2.39-1.424-2.951
	c-0.879-0.563-2.056-0.845-3.531-0.845c-1.033,0-1.923,0.234-2.672,0.703C85.875,5.461,85.5,6.176,85.5,7.135
	c0,0.492,0.094,0.885,0.281,1.178c0.188,0.294,0.516,0.551,0.984,0.773c0.468,0.223,1.089,0.451,1.863,0.686
	c0.772,0.234,2.038,0.574,3.795,1.02c0.07,0,0.258,0.047,0.563,0.141c0.07,0.023,0.141,0.035,0.211,0.035
	c0.844,0.211,1.617,0.445,2.32,0.703s1.441,0.65,2.215,1.178s1.418,1.242,1.934,2.145c0.514,0.902,0.773,1.985,0.773,3.251
	c0,2.39-0.914,4.329-2.742,5.817S93.303,26.293,90,26.293c-1.43,0-2.782-0.176-4.06-0.527s-2.414-0.896-3.41-1.635
	s-1.781-1.675-2.355-2.813c-0.574-1.137-0.861-2.454-0.861-3.954H84.657z"/>
</svg>
-->

                                <q-img class="" src="~assets/logo_v3.png" style="max-width: 140px" ></q-img>
                            </a>
                        </div>

                        <div class="col-9 text-bold " >
                          <!--  <span class="text-h6 text-yellow-8 text-bold">'Smart Klips'</span>는 한국노동패널 조사자료를 이용하여 연구자들이 연구분석을 위해 쉽게
                        데이터를 생성할 수 있도록 제공되는 맞춤형 “데이터추출” 지원 플랫폼입니다.-->

                            <span class="text-h5  text-bold q-mr-sm" style="color: #03A683">'자료추출 시스템'</span>  은 사용자가 원하는 변수 및 차수를 선택 및 병합하여 원하는<br>
                            데이터 형태로 생성하는 <span class="text-h6 text-yellow-8 text-bold">'데이터추출'</span> 시스템입니다.
                        </div>
                    </q-card-section>
                </q-card>

                    <q-tabs active-color="primary" align="justify" class="text-grey q-pa-md" dense indicator-color="primary" inline-label narrow-indicator v-model="tab">
                        <q-tab icon="addchart" label="통합 패널데이터 생성" name="create"/>
                        <q-tab icon="youtube_searched_for" label="KLIPS 원자료 변수 검색" name="search"/>
                        <q-tab icon="contact_support" label="사용법 및 주의사항" name="howto"/>
                        <q-tab icon="contact_support" label="FAQ" name="faq"/>
                    </q-tabs>

                    <q-tab-panels class="q-pa-md" animated v-model="tab">
                        <!-- 1번째 탭 : 통합 패널데이터 생성-->
                        <q-tab-panel  name="create">
                            <q-form  @submit="onSubmit" >
                                <div class="">
                                <q-list>
                                    <!-- 1단계 -->
                                    <q-expansion-item   ><!--default-opened expand-separator-->
                                        <template v-slot:header>
                                            <q-item-section avatar>
                                                <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 1</q-chip>
                                            </q-item-section>

                                            <q-item-section >
                                                <div class="text-grey-8 q-gutter-xs">
                                                    <span class=""  >차수선택</span>
                                                    <span class="text-red-14 text-weight-bold text-caption"  >(필수)</span>
                                                    <!--<span class="q-pl-md"  >차수 : 01 ~ 21 (필수)</span>-->
                                                </div>
                                                <!--선택한 값 적용-->
                                                <q-card v-if="wave.length>0" class="my-card border q-mt-sm">
                                                    <q-card-section class="q-pa-sm">
                                                        <span class="  " style="word-break: break-all" >{{sortedWave.join('&nbsp;&nbsp;')}}</span>
                                                    </q-card-section>
                                                </q-card>
                                            </q-item-section>
                                        </template>
                                        <div class="row">
                                            <div class="q-pa-sm q-ma-md bg-grey-2  rounded-borders">
                                                <q-option-group @input="waveSelectChg()" v-model="waveSelect" :options="waveSelectOptions" color="primary" inline/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-sm-6 col-md-2 "  v-for="index in waveCount">
                                                <q-item dense>
                                                    <q-item-section class="itemSectionWave" avatar>
                                                        <q-checkbox    v-model="wave" :val=waveLabel(index) />
                                                    </q-item-section>
                                                    <q-item-section>
                                                        <q-item-label>{{waveLabel(index)}}차수</q-item-label>
                                                    </q-item-section>
                                                </q-item>
                                            </div>
                                        </div>
                                    </q-expansion-item>
                                    <q-separator class="q-my-lg"></q-separator>


                                    <!-- 2단계-1 -->
                                    <q-expansion-item  class="step2-1 q-mb-lg" icon="house" label="" header-class="text-teal">
                                        <template v-slot:header >
                                            <q-item-section avatar > <!--class="bg-grey-3 q-pa-sm"-->
                                                <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 2</q-chip>
                                            </q-item-section>
                                            <q-item-section  color="primary" >
                                                <q-item-label class="text-black text-bold"  caption>가구용 또는 개인용 가공 변수를 반드시 하나 이상 선택해야 합니다.</q-item-label>
                                                <q-item-label >
                                                    <q-badge color="green-6" align="middle" class="q-mr-sm">1</q-badge>
                                                    가구용 가공 변수 선택
                                                    <q-badge v-if="kt_select2_3.length>0" class="q-ml-md" color="green-6" align="middle" >
                                                        <q-icon name="verified_user" size="xs" class="q-mr-sm q-py-xs"></q-icon> 선택완료
                                                    </q-badge>
                                                    <q-badge v-else class="q-ml-md" color="warning" align="middle" >
                                                        <q-icon name="search_off" size="xs" class="q-mr-sm q-py-xs"></q-icon> 선택안함
                                                    </q-badge>
                                                </q-item-label>

                                                <!--선택한 값 적용-->
                                               <!-- <q-card v-if="kt_select2_3.length>0" class="my-card border q-mt-sm">
                                                    <q-card-section class="q-pa-sm">
                                                        <span class="  " style="word-break: break-all; color: black" >{{kt_select2_3.join('&nbsp;&nbsp;&nbsp;')}}</span>
                                                    </q-card-section>
                                                </q-card>-->
                                            </q-item-section>
                                        </template>
                                        <q-scroll-area style="height: 400px;">
                                            <div class="row q-ma-lg">
                                                <div class="full-width q-pa-sm q-pr-lg bg-grey-2  rounded-borders">
                                                    <q-option-group @input="waveSelect2Chg()" v-model="waveSelect2" :options="waveSelect2Options" color="primary" inline/>
                                                </div>
                                            </div>

                                            <q-item v-for="(list, index) in kt_select2_3_data" :key="index" tag="label" v-ripple>
                                                <q-item-section avatar>
                                                    <q-checkbox @input="waveSelect2DataChg()" color="teal" keep-color   v-model="kt_select2_3" :val=list[0] />
                                                </q-item-section>
                                                <q-item-section>
                                                    <q-item-label>{{list[0]}}</q-item-label>
                                                    <q-item-label caption>{{list[1]}}</q-item-label>
                                                </q-item-section>
                                            </q-item>
                                        </q-scroll-area>
                                    </q-expansion-item>


                                    <!-- 2단계-2 -->
                                    <q-expansion-item  class="step2-2  q-mb-lg" icon="family_restroom" label="개인용 변수" header-class="text-blue-8" >
                                        <template v-slot:header>
                                            <q-item-section avatar class="q-ml-xl">
        <!--                                        <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 1</q-chip>-->
                                            </q-item-section>
                                            <!--                                    <q-item-section avatar>
                                                                                    <q-avatar icon="format_list_numbered_rtl" color=" " text-color="" />
                                                                                </q-item-section>-->
                                            <q-item-section style="margin-left: 10px">
                                                <q-item-label >
                                                    <q-badge color="blue" align="middle" class="q-mr-sm">2</q-badge>
                                                    개인용 가공 변수 선택
                                                    <q-badge v-if="kt_select2_4.length>0" class="q-ml-md" color="green-6" align="middle" >
                                                        <q-icon name="verified_user" size="xs" class="q-mr-sm q-py-xs"></q-icon> 선택완료
                                                    </q-badge>
                                                    <!--privacy_tip-->
                                                    <q-badge v-else  class="q-ml-md" color="warning" align="middle" >
                                                        <q-icon name="search_off" size="xs" class="q-mr-sm q-py-xs"></q-icon> 선택안함
                                                    </q-badge>
                                                </q-item-label>

                                                <!--선택한 값 적용-->
                                                <!--<q-card v-if="kt_select2_4.length>0" class="my-card border q-mt-sm">
                                                    <q-card-section class="q-pa-sm">
                                                        <span class="  " style="word-break: break-all; color: black" >{{kt_select2_4.join('&nbsp;&nbsp;&nbsp;')}}</span>
                                                    </q-card-section>
                                                </q-card>-->
                                            </q-item-section>
                                        </template>
                                        <q-scroll-area style="height: 400px;">
                                            <div class="row q-ma-lg">
                                                <div class="full-width q-pa-sm q-pr-lg bg-grey-2  rounded-borders">
                                                    <q-option-group @input="waveSelect3Chg()" v-model="waveSelect3" :options="waveSelect3Options" color="primary" inline/>
                                                </div>
                                            </div>


                                            <q-item v-for="(list, index) in kt_select2_4_data" :key="index"  tag="label" v-ripple>
                                                <q-item-section avatar>
                                                    <q-checkbox  @input="waveSelect3DataChg()" color="blue-8" keep-color  v-model="kt_select2_4" :val=list[0] />
                                                </q-item-section>
                                                <q-item-section>
                                                    <q-item-label>{{list[0]}}</q-item-label>
                                                    <q-item-label caption>{{list[1]}}</q-item-label>
                                                </q-item-section>
                                            </q-item>
                                        </q-scroll-area>
                                    </q-expansion-item>

                                    <!-- 2단계-3 -->
                                    <q-expansion-item  class="step2-3" icon="family_restroom" label="추가 변수 입력" header-class="text-grey-10" >
                                        <template v-slot:header>
                                            <q-item-section avatar class="q-ml-xl">
                                            </q-item-section>
                                            <q-item-section style="margin-left: 10px">
                                                <q-item-label >
                                                    <q-badge color="black" align="middle" class="q-mr-sm">3</q-badge>
                                                    KLIPS 원자료 변수 추가
                                                    <q-badge v-if="add_h.length>0 || add_p.length>0" class="q-ml-md" color="green-6" align="middle" >
                                                        <q-icon name="verified_user" size="xs" class="q-mr-sm q-py-xs"></q-icon> 선택완료
                                                    </q-badge>
                                                    <q-badge v-else class="q-ml-md" color="warning" align="middle" >
                                                        <q-icon name="search_off" size="xs" class="q-mr-sm q-py-xs"></q-icon> 선택안함
                                                    </q-badge>
                                                </q-item-label>

                                                <!--선택한 값 적용-->
                                                <!--
                                                <div v-if="add_h" class="text-grey-8 q-gutter-xs q-mb-sm">
                                                    <span class="text-caption text-weight-bold " style="word-break: break-all" >가구용:{{add_h}}</span>
                                                </div>

                                                <div v-if="add_p" class="text-grey-8 q-gutter-xs">
                                                    <span class="text-caption text-weight-bold" style="word-break: break-all" >개인용:{{add_p}}</span>
                                                </div>-->
                                            </q-item-section>
                                        </template>
                                        <div class="row">
                                            <div class="col-12 q-pb-lg " >
                                                <q-item class="row items-center">
                                                    <div class="col-4">
                                                        <q-item-section avatar class="q-pl-md">
                                                            <q-item-label  ><span class="text-primary text-bold">"가구용"</span> 원변수 입력</q-item-label>
                                                        </q-item-section>
                                                    </div>
                                                    <div class="col-8">
                                                        <q-item-section>
                                                            <q-input @keydown.enter.prevent="submit" outlined dense v-model="add_h" style=""  placeholder="추가할 변수를 입력 하세요. 예1) h0141      예2) h0151 h0152"  />
                                                        </q-item-section>
                                                    </div>
                                                </q-item>
                                                <q-item class="row items-center">
                                                    <div class="col-4">
                                                        <q-item-section avatar class="q-pl-md">
                                                            <q-item-label  ><span class="text-primary text-bold">"개인용"</span> 원변수 입력</q-item-label>
                                                        </q-item-section>
                                                    </div>
                                                    <div class="col-8">
                                                        <q-item-section>
                                                            <q-input @keydown.enter.prevent="submit" outlined dense v-model="add_p" style=""  placeholder="추가할 변수를 입력 하세요. 예1) p0101      예2) p0201 p0202"  />
                                                        </q-item-section>
                                                    </div>
                                                </q-item>
                                                <q-item-label class="q-pl-lg text-black text-bold" caption> 추가할 KLIPS 원자료 변수를 입력할 때는 변수의 6자리 숫자 중 조사차수를 의미하는 첫 2자리 숫자를 제외한 나머지 4자리 숫자만을 포함한 변수명을 입력해야 합니다. 예) h220141 -> h0141 또는 p220201 p220202 -> p0201 p0202
                                                    <!--<span class="text-red text-bold">(선택사항)</span>-->
                                                </q-item-label>
                                               <!-- <q-item-label class="q-pl-lg" caption>- <span class="text-red text-bold">검색</span>을 통해 추가 가능</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- <span class="text-red text-bold">코드북</span>을 통해 추가 가능</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- Step 2에서 가구, 가구원 모두 선택했다면 Step 3도 모두 입력가능</q-item-label>-->
                                            </div>
                                        </div>
                                    </q-expansion-item>
                                    <q-separator class="q-my-lg"></q-separator>
                                    <!-- 2-1단계 원변수 -->
                                    <!--
                                    <q-expansion-item   >
                                        <template v-slot:header>
                                            <q-item-section avatar>
                                                <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 3</q-chip>
                                            </q-item-section>

                                            <q-item-section>원변수 입력</q-item-section>
                                        </template>
                                        <div class="row">
                                            <div class="col-12 " >
                                                <q-item class="row items-center">
                                                    <div class="col-4">
                                                        <q-item-section avatar class="q-pl-md">
                                                            <q-item-label  ><span class="text-primary text-bold">"가구용"</span> 원변수 입력</q-item-label>
                                                        </q-item-section>
                                                    </div>
                                                    <div class="col-8">
                                                        <q-item-section>
                                                            <q-input outlined dense v-model="add_h" style=""  placeholder="추가할 변수 입력"  />
                                                        </q-item-section>
                                                    </div>
                                                </q-item>
                                                <q-item class="row items-center">
                                                    <div class="col-4">
                                                        <q-item-section avatar class="q-pl-md">
                                                            <q-item-label  ><span class="text-primary text-bold">"개인용"</span> 원변수 입력</q-item-label>
                                                        </q-item-section>
                                                    </div>
                                                    <div class="col-8">
                                                        <q-item-section>
                                                            <q-input outlined dense v-model="add_p" style=""  placeholder="추가할 변수 입력"  />
                                                        </q-item-section>
                                                    </div>
                                                </q-item>
                                                <q-item-label class="q-pl-lg" caption> - 원변수 추가 가능(<span class="text-red text-bold">선택사항</span>이므로 이 단계를 건너뛰어도 됨)</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- <span class="text-red text-bold">검색</span>을 통해 추가 가능</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- <span class="text-red text-bold">코드북</span>을 통해 추가 가능</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- Step 2에서 가구, 가구원 모두 선택했다면 Step 3도 모두 입력가능</q-item-label>
                                            </div>
                                        </div>
                                    </q-expansion-item>
                                    <q-separator class="q-my-lg"></q-separator>
                                    -->
                                    <!-- 3단계 -->
                                    <q-expansion-item   >
                                        <template v-slot:header>
                                            <q-item-section avatar>
                                                <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 3</q-chip>
                                            </q-item-section>

                                            <q-item-section>
                                                <div class="text-grey-8 q-gutter-xs">
                                                    <span class=""  >저장파일</span>
                                                    <span class="text-red-14 text-weight-bold text-caption"  >(필수)</span>
                                                </div>
                                            </q-item-section>
                                        </template>
                                        <div class="row">
                                            <div class="col-12 " >
                                                <q-item class="row items-center">
                                                    <q-item-label class="q-mr-md">저장할 파일명 : </q-item-label> <q-input outlined dense v-model="filename" style=""  placeholder="예 : save_20201220"  />
                                                </q-item>

                                                <q-item class="row items-center">
                                                    <div class="col">
                                                        파일타입 :
                                                        <q-radio v-model="filesave" val="Stata" label="STATA(*.dta)" />
                                                        <q-radio v-model="filesave" val="Excel" label="Excel(*.xlsx)" />
                                                        <q-radio v-model="filesave" val="Csv" label="Text(*.csv)" />
                                                        <q-radio v-model="Sas" val="Sas" label="SAS(*.sas7bdat)" disable/>
                                                        <q-radio v-model="Sas" val="Spss" label="SPSS(*.sav)" disable/>
                                                    </div>
                                                </q-item>
        <!--
                                                <q-item class="row items-center ">
                                                    <div class="col">
                                                        변수라벨 파일 :
                                                        <q-radio v-model="Stata" val="Stata" label="변수라벨(*.xlsx)" />
                                                        <q-radio v-model="Excel" val="Excel" label="변수라벨(*.csv)" />
                                                    </div>
                                                    <q-space></q-space>
                                                </q-item>
                                                -->
                                                <q-item-label class="q-pl-md q-mb-lg text-black text-bold" caption>다른 저장 포맷은 추후 지원예정</q-item-label>




                                                <!-- <q-item-label icon="star" caption> - 3가지 타입중 한가지 선택</q-item-label>
             -->
                                            </div>
                                        </div>
                                        <!--
                                        <q-item v-for="index in 21" tag="label" v-ripple>
                                            <q-item-section avatar>
                                                <q-checkbox    v-model="wave" :val=waveLabel(index) />
                                            </q-item-section>
                                            <q-item-section>
                                                <q-item-label>{{waveLabel(index)}}차수</q-item-label>
                                            </q-item-section>
                                        </q-item>
                                        -->
                                    </q-expansion-item>
                                    <q-separator class="q-my-lg"></q-separator>
                                </q-list>
                                <div class="q-mb-xl"></div>
                                <!-- 제출 -->
                                <div class="q-mt-md row justify-end q-gutter-sm">
                                    <q-btn type="submit" color="primary" label="데이터 추출" />
                                    <q-btn @click="searchInit()"  color="white" text-color="black" label="초기화" />
                                </div>
                            </div>
                            </q-form>
                        </q-tab-panel>


                        <!-- 2번째 탭 : 추가변수 검색 -->
                        <q-tab-panel name="search" >
                            <q-form id="frmSearch"  @submit="onSearch">
                                <div class="">
                                <q-list>
                                    <!-- 1단계 -->
                                    <q-expansion-item   ><!--default-opened expand-separator-->
                                        <template v-slot:header>

                                            <q-item-section avatar>
                                                <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 1</q-chip>
                                            </q-item-section>

                                            <q-item-section >
                                                <div class="text-grey-8 q-gutter-xs">
                                                    <span class=""  >차수선택</span>
                                                    <span class="text-red-14 text-weight-bold text-caption"  >(필수)</span>
                                                    <!--<span class="q-pl-md"  >차수 : 01 ~ 21 (필수)</span>-->
                                                </div>
                                            </q-item-section>
                                        </template>
                                        <div class="row">
                                            <div class="q-pa-md q-ma-md bg-grey-2  rounded-borders">
                                                <q-option-group @input="waveSelectChg()" v-model="waveSelect" :options="waveSelectOptions" color="primary" inline/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-sm-6 col-md-2 "  v-for="index in waveCount">
                                                <q-item dense>
                                                    <q-item-section class="itemSectionWave" avatar>
                                                        <q-checkbox    v-model="wave" :val=waveLabel(index) />
                                                    </q-item-section>
                                                    <q-item-section>
                                                        <q-item-label>{{waveLabel(index)}}차수</q-item-label>
                                                    </q-item-section>
                                                </q-item>
                                            </div>
                                        </div>
                                    </q-expansion-item>
                                    <q-separator class="q-my-lg"></q-separator>

                                    <q-expansion-item>
                                        <template v-slot:header>
                                            <q-item-section avatar>
                                                <q-chip class="glossy" color="primary" text-color="white" icon="star">STEP 2</q-chip>
                                            </q-item-section>

                                            <q-item-section>
                                                <div class="text-grey-8 q-gutter-xs">
                                                    <span class=""  >가구용 또는 개인용 선택</span>
                                                    <span class="text-red-14 text-weight-bold text-caption"  >(필수)</span>
                                                </div>
                                            </q-item-section>
                                        </template>
                                        <div class="row">
                                            <div class="col-12 " >
                                                <q-item class="row items-center">
                                                    <div class="col-4">
                                                        <q-item-section avatar class="q-pl-md">
                                                            <q-option-group v-model="hp" :options="hpOptions" color="primary" inline/>
                                                        </q-item-section>
                                                    </div>
                                                    <div class="col-8">
                                                        <q-item-section>
                                                            <q-input outlined dense v-model="word" style=""  placeholder="검색할 단어를 입력하세요. 예) 소득"  />
                                                        </q-item-section>
                                                    </div>
                                                </q-item>
                                               <!--
                                                <q-item-label class="q-pl-lg" caption> - 원변수 추가 가능(<span class="text-red text-bold">선택사항</span>이므로 이 단계를 건너뛰어도 됨)</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- <span class="text-red text-bold">검색</span>을 통해 추가 가능</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- <span class="text-red text-bold">코드북</span>을 통해 추가 가능</q-item-label>
                                                <q-item-label class="q-pl-lg" caption>- Step 2에서 가구, 가구원 모두 선택했다면 Step 3도 모두 입력가능</q-item-label>
                                                -->
                                            </div>
                                        </div>
                                    </q-expansion-item>
                                    <q-separator class="q-my-lg"></q-separator>
                                    <!-- 제출 -->
                                    <div class="q-mt-md row justify-end q-gutter-sm">
                                        <q-btn type="submit" color="primary" label="검색하기" />
                                        <q-btn @click="searchInit" color="white" text-color="black" label="초기화" />
                                    </div>
                                    <q-expansion-item v-model="expansionSearchResult">
                                        <template v-slot:header>
                                            <q-item-section avatar>
                                                <q-chip class="glossy" color="red-8" text-color="white" icon="star">검색결과</q-chip>
                                            </q-item-section>

                                            <q-item-section>여기를 클릭하시면 open / close가 가능합니다.</q-item-section>
                                        </template>
                                        <div class="row">
                                            <pre id="searchResult" class="" style="width: 100%" v-html="searchResult" ></pre>
                                        </div>
                                    </q-expansion-item>
                                </q-list>
                                <div class="q-mb-xl"></div>


                            </div>
                            </q-form>
                        </q-tab-panel>

                        <!-- 3번째 탭 : 사용법 안내 -->
                        <q-tab-panel name="howto">

                            <q-list bordered class="rounded-borders ">
                                <q-expansion-item group="somegroup"    label="">
                                    <template v-slot:header>
                                        <q-item-section avatar>
                                            <q-chip class="glossy" color="primary" text-color="white" icon="star">'통합 패널데이터 생성' 탭 사용법 안내</q-chip>
                                        </q-item-section>
                                    </template>
                                    <div class="q-pa-lg">
                                        <div class="q-mb-xl">
                                            <!--<p class="text-h5 text-bold">"통합 패널데이터 생성" 탭 사용법 안내</p>-->
                                            <p class="text-subtitle1 text-bold text-bold" ><q-icon name="star" color="primary"></q-icon> STEP 1 차수선택<span class="text-red">(필수)</span></p>
                                            <p class="text-body2">사용자가 원하는 데이터의 차수를 선택합니다.</p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/1-1.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>

                                        <div class="q-mb-xl">
                                            <p class="text-subtitle1 text-bold"><q-icon name="star" color="primary"></q-icon> STEP 2 가구용 / 개인용 가공변수 선택(둘 중 하나 이상 선택 <span class="text-red">필수</span>)</p>
                                            <p class="text-body2">사용자가 원하는 가구용, 개인용 변수를 선택합니다. (둘 다 선택도 가능합니다)<br>해당 변수는 사용자가 편하게 사용할 수 있도록 KLIPS 원변수를 활용해 가공한 변수들입니다.<br>만약, KLIPS 원변수를 가공 데이터에 추가하고 싶다면, 아래의 ‘STEP2 KLIPS 원자료 변수 추가’를 이용하시기 바랍니다.

                                            </p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/2-1.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>

                                        <div class="q-mb-xl">
                                            <p class="text-subtitle1 text-bold"><q-icon name="star" color="primary"></q-icon> STEP 2 KLIPS 원변수 변수 추가(필수 아님)</p>
                                            <p class="text-body2" style="white-space: pre-wrap;">사용자가 원하는 임의의 KLIPS 원변수를 추가하여 데이터를 생성할 수 있습니다.<br>가구용, 개인용 변수를 구분하여 입력란에 넣으면 그 변수를 포함한 데이터가 생성됩니다.<br>변수 입력시에는 변수의 6자리 숫자 중 조사차수를 의미하는 첫 2자리 숫자를 제외한 나머지 4자리 숫자만을 포함한 변수명을 입력해야 합니다.<br>단, 변수를 여러 개 입력시 변수간에는 공백으로 구분하면 됩니다.
                                            </p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/3-1.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>

                                        <div class="q-mb-xl">
                                            <p class="text-subtitle1 text-bold"><q-icon name="star" color="primary"></q-icon> STEP3 저장파일 <span class="text-red">(필수)</span></p>
                                            <p class="text-body2" style="white-space: pre-wrap;">사용자는 저장하고자 하는 파일명을 직접 입력합니다.<br>저장할 파일형식은 Stata, Excel 또는 Text 중에서 선택할 수 있습니다. (다른 포맷의 데이터는 추후 업데이트 예정)</p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/4-1.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>
                                    </div>
                                </q-expansion-item>

                                <q-separator class="q-my-xs"></q-separator>


                                <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
                                <!-- 추가 변수 검색 -->
                                <q-expansion-item group="somegroup"    label="">
                                    <template v-slot:header>
                                        <q-item-section avatar>
                                            <q-chip class="glossy" color="primary" text-color="white" icon="star">'KLIPS 원자료 변수 검색' 탭 사용법 안내</q-chip>
                                        </q-item-section>
                                    </template>

                                    <div class="q-pa-lg">
                                        <div class="q-mb-xl">
                                            <!--<p class="text-h5 text-bold">"추가변수 검색" 탭 사용법 안내</p>-->
                                            <p class="text-subtitle1 text-bold"><q-icon name="star" color="primary"></q-icon> STEP 1 차수선택<span class="text-red">(필수)</span></p>
                                            <p class="text-body2" style="white-space: pre-wrap;">이전 “데이터생성” 탭에서 선택한 차수를 그대로 사용합니다.<br>만약 차수를 변경하면 “데이터생성” 탭의 차수도 자동으로 변경됩니다.</p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/1-1.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>

                                        <div class="q-mb-xl">
                                            <p class="text-subtitle1 text-bold"><q-icon name="star" color="primary"></q-icon> STEP2 가구용 또는 개인용 선택<span class="text-red">(필수)</span></p>
                                            <p class="text-body2" style="white-space: pre-wrap;">검색할 변수가 가구용 데이터에 있으면 “가구용”을 선택하고, 개인용 데이터에 있으면 “개인용”을 선택합니다.<br>가령 “소득”이라고 입력하고 키보드의 엔터키를 누르거나 “검색하기” 버튼을 누르면 해당 차수의 원변수 중에서<br>“소득”이 포함되어 있는 모든 변수가 검색창에 나타납니다.<br><br>* 한 단어만 검색 가능합니다.
                                            </p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/5.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>

                                        <div class="q-mb-xl">
                                            <p class="text-subtitle1 text-bold"><q-icon name="star" color="primary"></q-icon> 검색결과</p>
                                            <p class="text-body2" style="white-space: pre-wrap;">STEP 1, 2의 조건을 반영한 결과가 화면에 나타납니다.<br>이때 사용자는 원하는 변수명을 마우스로 복사하여 첫번째 “데이터생성” 탭의 “추가변수 입력”란에<br>붙여넣기 하여 그 변수가 포함된 데이터를 생성할 수 있습니다.<br><br>* 추가로 단어를 검색하여 “데이터생성” 탭 “추가변수 입력”란에 계속 추가할 수 있습니다.

                                            </p>
                                            <q-card bordered  flat>
                                                <q-card-section>
                                                    <q-img bordered class="border" src="~assets/howto/6.jpg" transition="fade" />
                                                </q-card-section>
                                            </q-card>
                                        </div>
                                    </div>
                                </q-expansion-item>
                            </q-list>



                        </q-tab-panel>

                        <!-- 4번째 탭 : FAQ -->
                        <q-tab-panel name="faq">

                            <q-list bordered class="rounded-borders ">

                                <q-expansion-item group="somegroup"  switch-toggle-side  label="질문 1) 생성된 Stata 파일은 모든 버전에서 사용이 가능한가요?">
                                    <q-card>
                                        <q-card-section style="white-space: pre-wrap;">Stata 버전 14 이상에서만 사용이 가능합니다.

Stata 13 이하 버전 사용자께서는 Excel 혹은 text 형태의 데이터를 추출한 후,

해당 프로그램에서 데이터를 불러오시기 바랍니다.</q-card-section>
                                    </q-card>
                                </q-expansion-item>
                                <q-separator />
                                <q-expansion-item group="somegroup"  switch-toggle-side  label='질문 2) “KLIPS 원자료 변수 검색” 탭에서 단어검색은 한 개만 가능한가요?'>
                                    <q-card>
                                        <q-card-section>
                                            네, 단어는 1개씩만 검색할 수 있습니다. 그러나 반복하여 여러 개를 검색할 수 있습니다.
                                        </q-card-section>
                                    </q-card>
                                </q-expansion-item>
                                <q-separator />
                                <q-expansion-item group="somegroup"  switch-toggle-side  label="질문 3) SAS, SPSS 사용자가 자료추출을 하고자 하면 어떻게 하나요?">
                                    <q-card>
                                        <q-card-section style="white-space: pre-wrap;">STATA로 지정하여 dta 파일로 추출한 후 해당 프로그램의 '불러오기' 기능을 이용해 보시기 바랍니다.

또는 Excel혹은 Text로 추출하면 변수리스트 파일까지 한꺼번에 추출됩니다.

이 파일을 이용해 해당 통계패키지에서 데이터에 라벨을 붙이기 바랍니다.
                                        </q-card-section>
                                    </q-card>
                                </q-expansion-item>
                            </q-list>
                            <div class="q-pt-lg  vertical-middle">
                                한국노동패널조사에 대하여 문의해주세요.
                                <q-btn @click="openURL('https://www.kli.re.kr/klips/selectBbsNttList.do?bbsNo=87&key=442')" target="_blank" icon="mail"  class="q-ml-lg" type="submit" color="primary" label="문의하기" />
                            </div>
                        </q-tab-panel>
                    </q-tab-panels>
                </q-card>
        </div>
    </q-page>
    </q-page-container>
</template>

<script>
  import exeption from 'src/store/exception'
  import {openURL} from 'quasar'
  import { Loading } from 'quasar'
  import Api from 'src/apis/Api'
  import Swal from 'sweetalert2'
  export default {
  name: 'PageIndex',
    data() {
    return {
      expansionSearchResult:false,
      tab: 'create', //'',
      color: 'cyan',
      filesave:'Stata',
      filename:'',
      wave:[],

      add_h:'',
      add_p:'',
      kt_select2_3:[],
      kt_select2_4:[],
      kt_select2_3_data: [
        ["h_resid_type", '주택점유형태 (1=자가, 2=전세, 3=월세, 4=기타)'], ["h_hprice", '소유주택시가 (단위: 만원)'],
        ["h_region", "거주지역(16개시도, 19=세종시) KLIPS 코드북참고"], ["h_hsex", "가구주 성별 (1=남자, 2=여자)"], ["h_hage", "가구주 나이"], ["h_kidage06", "0세~6세자녀 수"],
        ["h_kidage712", "7세~12세자녀 수"], ["h_kidage1315", "13세~15세자녀 수"], ["h_kid", "0세 ~ 고등학교 자녀 수 "], ["h_num", "가구원 수"],
        ["h_hmarital", "가구주 혼인상태 (1=미혼, 2=기혼유배우, 3=기혼무배우)"], ["h_hedu", "가구주 교육수준 (1=무학, 2=고졸미만, 3=고졸, 4=대재/중퇴 5=전문대졸, 6=대졸이상)"], ["h_inc_1", "이전소득(단위: 만원)"],
        ["h_inc_2", "사회보험소득(단위: 만원)"], ["h_inc_3", "기타소득(단위: 만원)"], ["h_inc_4", "근로소득(단위: 만원)"], ["h_inc_5", "금융소득(단위: 만원)"], ["h_inc_6", "부동산소득(단위: 만원)"],
        ["h_inc_total", "총소득(단위: 만원)"], ["h_incomeq", "소득10분위 (1=최하위 10%, 2=최하위 10%~20%...10=최상위 10%)"], ["h_asset_1", "금융자산(단위: 만원)"],
        ["h_asset_2_1", "부동산자산(거주주택 제외):연속형 (단위 : 만원)"],
        ["h_asset_2_2", "부동산자산(거주주택제외):범주형 (1=1천만원 미만, 2=1천 ~ 5천만원 미만, 3=5천 ~ 1억원 미만, 4=1억 ~ 5억원 미만, 5=5억 ~10억원 미만, 6=10억 이상) "],
        ["h_asset_3_1", "임차보증금(연속형) (단위: 만원)"],
        ["h_asset_3_2", "임차보증금(범주형) (1=1천만원 미만, 2=1천 ~ 5천만원 미만, 3=5천 ~ 1억원 미만, 4=1억 ~ 5억원 미만, 5=5억 ~10억원 미만, 6=10억 이상) "],
        ["h_debt_total", "부채총액(임대보증금 포함) (단위: 만원)"], ["h_debt_pay", "부채상환액 (단위: 만원/월)"], ["h_eqscale_ori", "OECD 가구균등화지수_original"],
        ["h_eqscale_mod", "OECD 가구균등화지수_modified"], ["h_sample98", "98원가구여부 (1=98표본 원가구, 2=98표본 분가가구, 3=조사대상가구 아님)"],
        ["h_sample09", "09통합표본 원가구여부 (1=09통합표본 원가구, 2=09분가가구, 3=조사대상아님)"],["h_sample18", "18통합표본 원가구여부 (1=18통합표본 원가구, 2=18분가가구, 3=조사대상아님)"],
        ["h_weight98", "98표본 가구 가중치"], ["h_weight09", "09통합표본 가구 가중치"], ["h_weight18", "18통합표본 가구 가중치"]
      ],
      kt_select2_4_data: [
        ["p_sex", "가구원 성별 (1=남자, 2=여자)"], ["p_age", "가구원 나이"], ["p_rel", "가구주와의 관계 KLIPS 코드북 참고"], ["p_edu", "교육수준 (1=무학, 2=고졸미만, 3=고졸, 4=대재/중퇴, 5=전문대졸, 6=대졸이상)"],
        ["p_religion", "종교 (1=무교, 2=불교, 3=기독교(개신교), 4=천주교, 5~10: KLIPS 코드북 참고)"], ["p_married", "가구원 혼인상태 (1=미혼, 2=기혼유배우, 3=기혼무배우)"],
        ["p_region", "거주지역(16개시도, 19=세종시) KLIPS 코드북참고"], ["p_econstat", "ILO기준경제활동 (1=취업자, 2=ILO기준실업자, 3=비경제활동자)"], ["p_jobtype", "임금근로자 여부 (1=임금근로자, 2=비임금근로자)"],
        ["p_wage", "월평균 임금 또는 소득 (단위: 만원)"], ["p_hours", "주당 평균근로시간(임금근로자)"], ["p_employ_type", "취업형태 (1=임금근로자, 2=자영업, 3=무급가족종사자)"],
        ["p_job_status", "종사상지위 (1=상용직, 2=임시직, 3=일용직, 4=고용주/자영업자, 5=무급가족 종사자)"], ["p_ind2000", "업종(한국표준산업분류8차 개정:2000년 code) KLIPS 코드북 참고"],
        ["p_ind2007", "업종(한국표준산업준류 9차 개정: 2007년 code) KLIPS 코드북 참고"], ["p_ind2017", "업종(한국표준산업준류 10차 개정: 2017년 code) KLIPS 코드북 참고"],
        ["p_jobfam2000", "직종(한국표준직업분류 5차: 2000년 code) KLIPS 코드북 참고"], ["p_jobfam2007", "직종(한국표준직업분류 6차: 2007년 code) KLIPS 코드북 참고"],
        ["p_jobfam2017", "직종(한국표준직업분류 7차: 2017년 code) KLIPS 코드북 참고"], ["p_firm_size", "종업원규모(범주형) (1=10명미만, 2=10명~29명, 3=30명~99명, 4=100명~299명, 5=300명~499명, 6=500명이상)"],
        ["p_job_begin", "취업시기(년도와 월)"],
        ["p_weight98_l", "종단가중치(98통합표본)"],["p_weight98_c", "횡단가중치(98통합표본)"],
        ["p_weight09_l", "종단가중치(09통합표본)"],["p_weight09_c", "횡단가중치(09통합표본)"],
        ["p_weight18_l", "종단가중치(18통합표본)"],["p_weight18_c", "횡단가중치(18통합표본)"],
        ["p_sample98", "98원가구여부 (1=98표본 원가구, 2=98표본 분가가구, 3=조사대상가구 아님)"], ["p_sample09", "09통합표본 원가구여부 (1=09통합표본 원가구, 2=09분가가구, 3=조사대상아님)"],
        ["p_sample18", "18통합표본 원가구여부 (1=18통합표본 원가구, 2=18분가가구, 3=조사대상아님)"],
      ],

      Stata:'Stata',
      Excel:'Excel',
      Csv:'Csv',
      Sas:'',
      Spss:'',
      waveCount:22,
      waveSelect:'',
      waveSelectOptions:[
        {
          label: '전체선택',
          value: 'all'
        },
        {
          label: '최근 5개차수',
          value: '5'
        },
        {
          label: '최근 10개차수',
          value: '10'
        },
        {
          label: '전체해제',
          value: 'none'
        },
       /* {
          label: '취소',
          value: 'cancel'
        }*/
      ],

      waveSelect2:'',
      waveSelect2Options:[
        {
          label: '전체선택',
          value: 'all'
        },
        {
          label: '전체해제',
          value: 'none'
        }
      ],

      waveSelect3:'',
      waveSelect3Options:[
        {
          label: '전체선택',
          value: 'all'
        },
        {
          label: '전체해제',
          value: 'none'
        }
      ],
      // 2번째 탭 검색
      searchResult:'',
      word:'',
      hp:'h',
      hpOptions:[ { label: '가구용', value: 'h' }, { label: '개인용', value: 'p' }]
    }
  },
    mounted() {
  //document.getElementById("searchResult").innerHTML = this.test;

  /*  Swal.fire({
      title: '파일을 다운 받으시겠습니까?',
      html:'<a href="//daf.txt" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color: rgb(48, 133, 214);">dta 저장</a>' +
        '<a href="//daf.txt" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color: rgb(0, 151, 123);">csv 저장</a>' +
        '<a href="//daf.txt" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color: black;">excel 저장</a>',
        // +'<a href="//d.txt"></a> <a href="//d.txt">csv 저장</a> <a href="//d.txt">excel 저장</a> ',
      text: 'dta가 생성되었습니다.',
      icon: 'success',
      confirmButtonColor: 'grey',
      confirmButtonText: '닫기',
    }).then((result) => {
      if (result.isConfirmed) {
        //window.open(process.env.API+res.data.name+'.dta', "_blank");
      }
    })*/
},
    computed: {
      sortedWave: function() {
        function compare(a, b) {
          if (a < b)
            return -1;
          if (a > b)
            return 1;
          return 0;
        }
        return this.wave.sort(compare);
      }
    },
  methods: {
    openURL,
    waveOrderby(){
      if(this.wave) {
        return this.wave.sort();
      }

    },
    waveSelectChg(evt){
      if(this.waveSelect==='all') {
        this.wave = [];
        for(let i=1; i<= this.waveCount; i++) {
          this.wave.push(this.waveLabel(i))
        }
      }
      else if(this.waveSelect==='none') {
        this.wave = [];
      }
      else if(this.waveSelect==='cancel') {
        this.wave = [];
      }
      else if(this.waveSelect==='5') {
        this.wave = [];
        for(let i=this.waveCount; i> this.waveCount-5; i--) {
          this.wave.push(this.waveLabel(i))
        }
      }
      else if(this.waveSelect==='10') {
        this.wave = [];
        for(let i=this.waveCount; i> this.waveCount-10; i--) {
          this.wave.push(this.waveLabel(i))
        }
      }
    },

    waveSelect2Chg(evt){
      if(this.waveSelect2==='all') {
        this.kt_select2_3 = [];
        for(let i=0; i< this.kt_select2_3_data.length; i++) {
          this.kt_select2_3.push(this.kt_select2_3_data[i][0])
        }
      }
      else if(this.waveSelect2==='none') {
        this.kt_select2_3 = [];
      }
    },
    waveSelect2DataChg(evt) {
      this.waveSelect2='';
    },
    waveSelect3Chg(evt){
      if(this.waveSelect3==='all') {
        this.kt_select2_4 = [];

        for(let i=0; i< this.kt_select2_4_data.length; i++) {
          this.kt_select2_4.push(this.kt_select2_4_data[i][0])
        }
      }
      else if(this.waveSelect3==='none') {
        this.kt_select2_4 = [];
      }
    },
    waveSelect3DataChg(evt) {
      this.waveSelect3='';
    },
    onSubmit(evt) {
      console.log('@submit - do something here', evt)
      //Notify.create({message: e.message, type: 'negative', html: true})
      this.saveFile()
    },
    searchInit(){
      this.waveSelect2=''
      this.waveSelect3=''
      this.kt_select2_3 = [];
      this.kt_select2_4 = [];
      this.add_h = '',
      this.add_p = '',
      this.filename = '',
      this.filesave = 'Stata',
      this.wave=false;
      this.waveSelect=null;
      this.waveSelect='';
      this.expansionSearchResult=false;
      this.word = '';
      this.hp = 'h';
    },
    async onSearch(evt) {
      console.log('@onSearch - do something here', evt)
      //Notify.create({message: e.message, type: 'negative', html: true})

      try {
          Loading.show()
          let res = await Api().post('/api/stata/storeKlipsApi', {
            kt_select2_5:this.wave,
            word:this.word,
            hp:this.hp,
            tab:this.tab,
          })
          // 성공시
          if(res.data) {
            //console.log(res.data);
            this.searchResult = res.data;
            this.expansionSearchResult = true;
            //document.getElementById("searchResult").innerHTML = this.searchResult;

          }
      } catch (e) {
        exeption(e)
      } finally {
        Loading.hide()
      }
    },

    async saveFile(ctx, p) {
      try {
        Loading.show()
/*
        res = await Api().post('/sanctum/token', {
          email: p.username,
          password: p.password,
          provider_token:p.provider_token||'',
          device_name: 'browser'
        });
*/
        let res;
        try {
          res = await Api().post('/api/stata/storeKlipsApi', {
            kt_select2_5:this.wave,
            kt_select2_3:this.kt_select2_3,
            kt_select2_4:this.kt_select2_4,
            tab:this.tab,
            filesave:this.filesave,
            filename:this.filename,
            add_h:this.add_h,
            add_p:this.add_p,
          })
        }
        catch (e) {
          exeption(e)
        }

        // 성공시
        if(res.data.name) {
          //window.open(process.env.API+res.data.name+'.zip', "_blank");
          Swal.fire({
            title: '파일을 다운 받으시겠습니까?',
            /*
            html:'<a href="'+process.env.API+res.data.name+'.dta" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color: rgb(48, 133, 214);">Dta 저장</a>' +
              '<a href="'+process.env.API+res.data.name+'.csv" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color: rgb(0, 151, 123);">Excel 저장</a>' +
              '<a href="'+process.env.API+res.data.name+'.xlsx" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color: black;">Csv 저장</a>'+
              '<a href="'+process.env.API+res.data.name+'_v.csv" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color:#2777b0ad ;">변수라벨.csv 저장</a>'+
              '<a href="'+process.env.API+res.data.name+'_v.xlsx" target="_blank"  class="swal2-confirm swal2-styled" style="display: inline-block; background-color:#2777b0ad ;">변수라벨.xlsx 저장</a>',
            */
            text: '파일이 생성되었습니다.',
            icon: 'success',
            confirmButtonColor: '',
            confirmButtonText: '저장하기',
          }).then((result) => {
            if (result.isConfirmed) {
              window.open(process.env.API+res.data.name+'.zip', "_blank");
            }
          })
         /* Swal.fire({
            title: '파일을 다운 받으시겠습니까?',
            text: 'dta가 생성되었습니다.',
            icon: 'success',
            showCancelButton: true,
            showDenyButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#00977b',
            denyButtonColor: '#595959',
            cancelButtonText: '닫기',
          }).then((result) => {
            if (result.isConfirmed) {
              window.open(process.env.API+res.data.name+'.dta', "_blank");
            }
          })*/
        }
        else {

        }
      } catch (e) {
        exeption(e);
      } finally {
        Loading.hide();
      }
    },
    waveLabel(test) {
      let aa = String(test).padStart(2,'0')
      return aa
    }
  }
}

</script>
<style>
    #q-app {
        font-size: 16px;
    }
/*    .itemSectionWave {
        padding-right: 0;
    }*/
    #searchResult{
        /*white-space: pre-wrap;*/
        /*word-break: break-all;*/
        border-radius: 8px;
        padding: 20px;
        font-weight: bold !important;
        border-style: solid;
        border-width: 1px;
        /*background-color: #18171B;*/
        line-height: 1.2em;
        font-size: 12px;
        /*color: #56DB3A;*/
        color: #343434;
        font: 12px Menlo, Monaco, Consolas, monospace;
        font-style: normal;
        font-variant-ligatures: normal;
        font-variant-caps: normal;
        font-variant-numeric: normal;
        font-variant-east-asian: normal;
        font-weight: normal;
        font-stretch: normal;
        font-family: Menlo, Monaco, Consolas, monospace;
    }

    a:link {
        text-decoration: none;
    }

    .bg_step2{
        /*background: #e0e0e0 !important;*/
    }

/*    .q-item.q-item-type.row.no-wrap.q-item--clickable.q-link.cursor-pointer.q-focusable.q-hoverable {
        background: #e0e0e0 !important;
    }*/
.step2-1.q-expansion-item--expanded {
    background-color: #D8E5E4;
}
.step2-2.q-expansion-item--expanded {
    background-color: #E9EEF5;
}
.step2-3.q-expansion-item--expanded {
    background-color: #E0E0E0;
}
.swal2-styled.swal2-confirm {
    font-size: 1em !important;
}
/*    .swal2-confirm {
        display: inline-block;background-color: white;border: 1px;border-style: solid;border-color: gray;color: gray !important;
    }*/
</style>

